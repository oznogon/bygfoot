/*
 * Initial main.c file generated by Glade. Edit as required.
 * Glade will not overwrite this file.
 */

#include "main.h"

/**
   Initialize some global variables. Most of them get nullified.
*/
void
set_variables(void)
{
    ligs = cps = country.supercups = NULL;
    country.name = country.symbol = country.id = NULL;
    
    font_name = g_string_new("0");
}

/**
   Process the command line arguments and do some things
   that have to be done at the beginning (like initializing the
   random number generator).
   @param argc Number of command line arguments.
   @param argv Command line arguments array.
*/
void
bygfoot_init(gint argc, gchar *argv[])
{
    gchar buf[SMALL];
    gchar *pwd = g_get_current_dir();

    /* initialize the random nr generator */
    srandom((unsigned)time(NULL));

    add_support_directory_recursive(PACKAGE_DATA_DIR "/" PACKAGE "/support_files");  
    sprintf(buf, "%s/support_files", pwd);
    g_free(pwd);
    add_support_directory_recursive(buf);
    sprintf(buf, "%s/.bygfoot", g_get_home_dir());
    add_support_directory_recursive(buf);

    set_variables();

}

/**
   Initialize the GTK stuff and the gettext stuff.
   Start the game.
   @param argc Number of command line arguments.
   @param argv Command line arguments array.
*/
gint
main (gint argc, gchar *argv[])
{

#ifdef ENABLE_NLS
    bindtextdomain (GETTEXT_PACKAGE, PACKAGE_LOCALE_DIR);
    bind_textdomain_codeset (GETTEXT_PACKAGE, "UTF-8");
    textdomain (GETTEXT_PACKAGE);
#endif
    
  gtk_set_locale ();
  gtk_init (&argc, &argv);
  
  bygfoot_init(argc, argv);

  window_show_startup();

  gtk_main ();

  free_memory();
  return 0;
}
